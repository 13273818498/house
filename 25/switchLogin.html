<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="../25css/base.css">
    <link rel="stylesheet" href="../25css/switchLogin.css">
    <script src=""></script>
</head>

<body>
    <header>
        <div class="le"><img src="../image/index/logo.jpg" alt=""></div>
        <div class="rig">
            <div class="one"><img src="../image/index/my.jpg" alt=""></div>
            <div class="two"><img src="../image/index/xiazai.jpg" alt=""></div>
        </div>
    </header>
    <section class="rentalAddr">
        <p><strong>首页</strong> > <span>我的</span> > <span>登录</span></p>
    </section>
    <div class="registerForm  login">
        <form action="#">
            <ul class="check">
                <li class="act">普通登录</li>
                <li>验证码快捷登录</li>
            </ul>
            <div class="customLogin active">
                <ul>
                    <li>
                        <input type="text" placeholder="请输入手机号码" required class="phone" />
                    </li>
                    <li><input type="text" placeholder="请输入密码" required class="ma" /></li>
                </ul>
                <input class="registerBtn" type="submit" value="立即登录" />
                <div class="tiShi">
                    <a href="#">立即注册</a>
                    <a href="#">忘记密码</a>
                </div>
            </div>
            <div class="fastLogin " style="display: none;">
                <ul>
                    <li class="mima">
                        <input type="text" placeholder="请输入手机号码" required class="phone" />
                        <a id="code" href="#">发送验证码</a>
                    </li>
                    <li><input type="text" placeholder="请输入短信中的验证码" required class="ma" /></li>
                </ul>
                <input class="registerBtn" type="submit" value="验证并登录" />
                <div class="tiShi">
                    <a href="#">立即注册</a>
                    <a href="#">忘记密码</a>
                </div>
            </div>
        </form>
    </div>
</body>

</html>
<script>
    (function () {
        var supportsOrientationChange = 'onorientationchange' in window ? 'orientationchange' : 'resize';
        var timeoutId;
        function setRem() {
            var clientWidth = document.documentElement.clientWidth;
            var nowPX = clientWidth / 320 * 10;
            document.documentElement.style.fontSize = nowPX + 'px';
        }
        setRem();
        window.addEventListener(supportsOrientationChange, function () {
            clearTimeout(timeoutId);
            timeoutId = setTimeout(function () {
                setRem();
            }, 300);
        }, false);
    })();
</script>
<script src="../25JS/touch.min.js"></script>
<script src="../25JS/jquery-3.5.1.min.js"></script>
<script src="../25JS/myCookie.js"></script>
<script>
    var reg1 = /^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/;
    var reg2 = /^[a-z0-9]{6,8}$/;
    // 页面跳转
    var shouye = document.getElementsByTagName("strong")[0];
    var my = document.getElementsByTagName("span")[0];
    // console.log(shouye, my);
    touch.on(shouye, 'tap', function () {
        window.location.href = 'http://127.0.0.1:5500/index.html';
    })
    touch.on(my, 'doubletap', function () {
        window.location.href = 'http://127.0.0.1:5500/25/my.html';
    })
    // 切换普通登录和快速登陆
    var $li_ = $(".check li");
    var $div = $('form>div');
    // console.log($li_, $div);
    touch.on($li_, 'tap', function () {
        var index = $(this).index();
        $div.hide();
        $div.eq(index).show();
        $li_.eq(index).addClass('act').siblings().removeClass('act');
    })
    // 2.获取手机号和密码或者验证码
    var phnum = document.getElementsByClassName('phone')[0];
    var psd1 = document.getElementsByClassName("ma")[0];
    var phnum1 = document.getElementsByClassName('phone')[1];
    var psd2 = document.getElementsByClassName("ma")[1];
    // console.log(phnum, psd1, phnum1, psd2);
    /******普通登录部分*****/
    // 手机号
    touch.on(phnum, 'tap', function () {
        phnum.ontouchstart = function () {
            if (phnum.value == '') {
                phnum.value = '请输入11位手机号';
            }
        }
        phnum.ontouchend = function () {
            if (!reg1.test(phnum.value)) {
                alert('手机号错误')
            }
        }
    })
    // 新密码
    touch.on(psd1, 'tap', function () {
        if (psd1.value == '') {
            alert('密码6-8个字符,包含小写字母和数字')
        } else if (!reg2.test(psd1.value)) {
            alert('密码不合法');
        }
    })
    /******快捷登录部分******/
    touch.on(phnum1, 'tap', function () {
        phnum.ontouchstart = function () {
            if (phnum1.value == '') {
                phnum1.value = '请输入11位手机号';
            }
        }
        phnum1.ontouchend = function () {
            if (!reg1.test(phnum.value)) {
                alert('手机号错误')
            }
        }
    })
    // 新密码
    touch.on(psd2, 'tap', function () {
        if (psd2.value == '') {
            alert('密码6-8个字符,包含小写字母和数字')
        } else if (!reg2.test(psd1.value)) {
            alert('密码不合法');
        }
    })
    // 1.设置验证码
    var min = 60;
    var time;
    var send_ = document.getElementById("code");
    // console.log(send_);
    touch.on(send_, 'tap', function () {
        if (phnum1.value == '') {
            alert('请输入手机号')
        } else {
            time = setInterval(function fn() {
                min = --min;
                if (min > 0) {
                    send_.innerHTML = +min + 's后重发'
                    if (min == 57 || min == 56 || min == 55) {
                        send_.innerHTML = '验证码是4535'
                    }
                } else {
                    min = 60;
                    send_.innerHTML = '重新发送';
                    clearInterval(time);
                }
            }, 1000);
        }
    })


    // 登录以后去my.html
    var denglu = $(".registerBtn");
    touch.on(denglu, 'tap', function () {
        // 回显
        localStorage.setItem("phone", phnum.value)
        window.location.href = 'http://127.0.0.1:5500/25/my.html';
    })
</script>